#!/usr/bin/env bash
set -o errexit

################################################################################
# SDL

sudo dpkg --add-architecture i386
sudo apt-get update
sudo apt-get install automake ia32-libs libtool subversion

################################################################################
# SDL

cd jni

hg clone http://hg.libsdl.org/SDL || true
cd SDL
hg pull http://hg.libsdl.org/SDL
hg update

cd ../..

################################################################################
# ODE

cd jni

svn checkout svn://svn.code.sf.net/p/opende/code/trunk ode
cd ode
svn update

./bootstrap
CFLAGS="-fno-exceptions -fno-rtti -O3" CXXFLAGS="-fno-exceptions -fno-rtti -O3" ./configure --host=arm-linux --enable-single-precision --disable-demos --disable-asserts --disable-libccd 

cd ../..

################################################################################
# android

./android-sdk/tools/android update project --path . --name Crag --target android-12 --subprojects

